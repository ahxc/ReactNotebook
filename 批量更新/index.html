<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    >
    <title>Document</title>
</head>

<body>
    <script>
        // React 设置 isBatchUpdate 来控制批量更新的原因主要是为了提高性能。如果一次更新涉及多个组件或子组件，可能会导致多次重绘和额外的计算开销。
        // 通过控制批量更新，React 可以尽量减少这些不必要的重绘和计算，从而提高应用的性能。

        // 批量更新情况：
        // 在 React 合成事件中是异步的

        // 在 hooks 中是异步的

        // 其他情况皆是同步的，例如：原生事件、setTimeout、Promise 等;
        // 同步更新状态下，根据状态变化逐步更新组件。这样做的好处是可以保证每次更新的准确性和一致性，避免因批量更新导致的不确定性和潜在问题。

        // 也可以使用 React.startTransition 来包裹一组更新操作，让它们作为一个事务进行批量更新。这样可以减少不必要的重绘和计算，提高性能。

        // 在决定是否使用批量更新时，需要考虑以下情况：

        // 批量更新适用于同时对多个组件进行更新，且这些组件之间存在依赖关系的情况。通过批量更新，可以减少多次重绘和额外的计算开销，从而提高性能。
        // 批量更新不适用于单个组件的独立更新。因为单个组件的更新可能会影响到其他组件的状态和渲染结果，如果与其他组件的更新合并在一起，可能导致不确定性和潜在问题。
        // 批量更新不适用于需要精确控制更新顺序的情况。因为批量更新会按照一定的顺序执行更新操作，如果更新顺序对结果有影响，那么使用批量更新可能会产生错误的结果。
    </script>
</body>

</html>